// Centralized translation dictionary and helpers
window.translations = {
    fr: {
        app_title: "SME Management",
        system_description: "SystÃ¨me de Gestion - Connectez-vous Ã  votre compte",
        username_label: "Nom d'utilisateur",
        username_placeholder: "Entrez votre nom d'utilisateur",
        pin_label: "Code PIN",
        pin_placeholder: "Entrez votre PIN",
        pin_hint: "PIN par dÃ©faut admin: 1234 | EmployÃ©s: voir administrateur",
        login_button: "Se connecter",
        login_loading: "Connexion...",
        quick_login_title: "Connexion rapide (dÃ©monstration):",
        quick_login_admin: "ðŸ‘¤ Admin",
        quick_login_employee: "ðŸ‘· EmployÃ©",
        status_online: "En ligne",
        status_offline: "Hors ligne",
        nav_dashboard: "ðŸ“Š Tableau de bord",
        nav_inventory: "ðŸ“¦ Inventaire",
        nav_sales: "ðŸ’° Ventes",
        nav_customers: "ðŸ‘¥ Clients",
        nav_finance: "ðŸ’³ Finance",
        nav_reports: "ðŸ“ˆ Rapports",
        nav_admin: "âš™ï¸ Admin",
        settings: "âš™ï¸ ParamÃ¨tres",
        logout: "ðŸšª DÃ©connexion",
        logout_confirm: "ÃŠtes-vous sÃ»r de vouloir vous dÃ©connecter?",
        sync_status: "SynchronisÃ©",
        loading: "Chargement...",
        install_app: "Installer l'application",
        session_expiring: "Votre session va expirer dans 10 secondes. Vous serez dÃ©connectÃ©(e) bientÃ´t.",
        session_expired: "Session expirÃ©e. DÃ©connexion...",
        logout_error: "Erreur lors de la dÃ©connexion",
        mode_admin: "Administrateur",
        mode_employee: "EmployÃ©",
        mode_prefix: "Mode:",
        user_prefix: "Utilisateur:",
        login_error: "Erreur de connexion",
        login_error_connection: "Erreur de connexion. VÃ©rifiez votre connexion internet."
    },
    ar: {
        app_title: "Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ØªØ¬Ø±",
        system_description: "Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© - Ù‚Ù… Ø¨ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ Ø­Ø³Ø§Ø¨Ùƒ",
        username_label: "Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…",
        username_placeholder: "Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…",
        pin_label: "Ø±Ù…Ø² PIN",
        pin_placeholder: "Ø£Ø¯Ø®Ù„ Ø±Ù…Ø² PIN",
        pin_hint: "PIN Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù„Ù„Ù…Ø´Ø±Ù: 1234 | Ø§Ù„Ù…ÙˆØ¸ÙÙˆÙ†: Ø§Ø³Ø£Ù„ Ø§Ù„Ù…Ø¯ÙŠØ±",
        login_button: "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„",
        login_loading: "Ø¬Ø§Ø±ÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„...",
        quick_login_title: "ØªØ³Ø¬ÙŠÙ„ Ø³Ø±ÙŠØ¹ (Ø¹Ø±Ø¶):",
        quick_login_admin: "ðŸ‘¤ Ù…Ø´Ø±Ù",
        quick_login_employee: "ðŸ‘· Ù…ÙˆØ¸Ù",
        status_online: "Ù…ØªØµÙ„",
        status_offline: "ØºÙŠØ± Ù…ØªØµÙ„",
        nav_dashboard: "ðŸ“Š Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…",
        nav_inventory: "ðŸ“¦ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†",
        nav_sales: "ðŸ’° Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª",
        nav_customers: "ðŸ‘¥ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡",
        nav_finance: "ðŸ’³ Ø§Ù„Ù…Ø§Ù„ÙŠØ©",
        nav_reports: "ðŸ“ˆ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±",
        nav_admin: "âš™ï¸ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©",
        settings: "âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª",
        logout: "ðŸšª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬",
        logout_confirm: "Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ø£Ù†Ùƒ ØªØ±ÙŠØ¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ",
        sync_status: "Ù…ØªØ²Ø§Ù…Ù†",
        loading: "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...",
        install_app: "ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚",
        session_expiring: "Ø³ØªÙ†ØªÙ‡ÙŠ Ø¬Ù„Ø³ØªÙƒ Ø®Ù„Ø§Ù„ 10 Ø«ÙˆØ§Ù†Ù. Ø³ÙŠØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬Ùƒ Ù‚Ø±ÙŠØ¨Ù‹Ø§.",
        session_expired: "Ø§Ù†ØªÙ‡Øª Ø§Ù„Ø¬Ù„Ø³Ø©. Ø¬Ø§Ø±ÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬...",
        logout_error: "Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬",
        mode_admin: "Ù…Ø¯ÙŠØ±",
        mode_employee: "Ù…ÙˆØ¸Ù",
        mode_prefix: "Ø§Ù„ÙˆØ¶Ø¹:",
        user_prefix: "Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:",
        login_error: "Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„",
        login_error_connection: "Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„. ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„Ùƒ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª."
    }
};

window.currentLang = document.documentElement.lang || 'fr';

function t(key) {
    const langDict = window.translations[window.currentLang] || {};
    return langDict[key] || key;
}

function applyTranslations(lang) {
    if (lang) {
        window.currentLang = lang;
    }
    const dir = window.currentLang === 'ar' ? 'rtl' : 'ltr';
    document.documentElement.setAttribute('lang', window.currentLang);
    document.documentElement.setAttribute('dir', dir);

    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (key) {
            el.textContent = t(key);
        }
    });

    document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
        const key = el.getAttribute('data-i18n-placeholder');
        if (key) {
            el.setAttribute('placeholder', t(key));
        }
    });
}

window.t = t;
window.applyTranslations = applyTranslations;
